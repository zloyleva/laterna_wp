var WPGlobusYoastSeo;jQuery(document).ready(function(r){"use strict";var n;if("undefined"!=typeof wpseoReplaceVarsL10n&&"undefined"!=typeof WPGlobusCoreData)if("edit-tags.php"==WPGlobusVendor.pagenow){n=WPGlobusYoastSeo={editorIDs:["description"],editor:{},submitId:"#submit",preventChangeEditor:!1,observer:null,init:function(){n.attachListeners(),_.delay(n.start,1500)},submit:function(e){"mouseenter"===e.type?r.each(n.editor,function(e,t){!n.editor[e].contentEditor||n.editor[e].contentEditor.isHidden()?r("#"+e).val(n.editor[e].content):tinymce.get(e).setContent(n.editor[e].content)}):"mouseleave"===e.type?n.preventChangeEditor||(r.each(n.editor,function(e,t){!n.editor[e].contentEditor||n.editor[e].contentEditor.isHidden()?r("#"+e).val(WPGlobusCore.TextFilter(t.content,n.getCurrentTab(),"RETURN_EMPTY")):tinymce.get(e).setContent(WPGlobusCore.TextFilter(t.content,n.getCurrentTab(),"RETURN_EMPTY"))}),n.preventChangeEditor=!1):"click"===e.type&&(n.preventChangeEditor=!0,"tinymce"!=getUserSetting("editor")&&setUserSetting("editor","tinymce"))},attachListeners:function(){r(".wrap").on("tabsactivate",function(e,a){r.each(n.editor,function(e,t){!n.editor[e].contentEditor||n.editor[e].contentEditor.isHidden()?r("#"+e).val(WPGlobusCore.TextFilter(t.content,a.newTab[0].dataset.language,"RETURN_EMPTY")):tinymce.get(e).setContent(WPGlobusCore.TextFilter(t.content,a.newTab[0].dataset.language,"RETURN_EMPTY"))})}),r(document).on("mouseenter",n.submitId,n.submit).on("mouseleave",n.submitId,n.submit).on("click",n.submitId,n.submit),r(document).on("tinymce-editor-init",function(e,t){if(-1!=_.indexOf(n.editorIDs,t.id)){var a=r("#"+t.id);n.editor[t.id]={},n.editor[t.id].contentEditor=t,n.editor[t.id].content=a.val(),t.setContent(WPGlobusCore.TextFilter(n.editor[t.id].content,WPGlobusCoreData.default_language,"RETURN_EMPTY")),r("#"+t.getContainer().id).find("iframe").addClass("wpglobus-translatable"),a.removeClass("hidden"),t.on("nodechange keyup",_.debounce(n.update,500)),a.on("input keyup",_.debounce(n.update,500))}})},update:function(e){var t,a;void 0!==e.target&&("tinymce"==(t=e.target.id)&&(t=e.target.dataset.id),void 0!==n.editor[t].contentEditor&&(a=!n.editor[t].contentEditor||n.editor[t].contentEditor.isHidden()?r("#"+t).val():n.editor[t].contentEditor.getContent({format:"raw"}),n.editor[t].content=WPGlobusCore.getString(n.editor[t].content,a,n.getCurrentTab())))},getCurrentTab:function(){return r(".wpglobus-taxonomy-tabs-list .ui-tabs-active").data("language")},start:function(){r(".wpglobus-element_description").css({display:"none"})}},WPGlobusYoastSeo.init();var e=function(){r(".wrap").on("tabsactivate",function(e,t){t.newTab[0].dataset.language==WPGlobusCoreData.default_language?r("#poststuff .inside").css({display:"block"}):r("#poststuff .inside").css({display:"none"})}),r.each(["category_description","sitedesc","sitename","tag_description","term_description","term_title"],function(e,t){wpseoReplaceVarsL10n.replace_vars[t]=WPGlobusCore.TextFilter(wpseoReplaceVarsL10n.replace_vars[t],WPGlobusCoreData.default_language)}),WPGlobusYoastSeo.observer=new MutationObserver(function(e){e.forEach(function(e){if("placeholder"==e.attributeName){WPGlobusYoastSeo.observer.disconnect();var t=r("#wpseo_focuskw");""==t.val()&&t.attr("placeholder",WPGlobusCore.TextFilter(t.attr("placeholder"),WPGlobusCoreData.default_language)),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})}})}),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})};window.WPGlobusYoastSeoPlugin=new e}else{var p;n=WPGlobusYoastSeo={wpseoTabSelector:"#wpglobus-wpseo-tabs",url:"",attrs:r("#wpglobus-wpseo-attr"),iB:r("#wpseo-meta-section-content"),t:r("#wpseo-meta-section-content"),ids:"",names:"",init:function(){n.start()},initAddKeywordPopup:function(){1===r("#wpseo-add-keyword-popup").length&&r(".wpseo-add-keyword").on("click",n.addKeywordPopup)},addKeywordPopup:function(){var e=r("#wpseo-add-keyword-popup").find("h3").html();tb_show(e,"#TB_inline?width=650&height=350&inlineId=wpseo-add-keyword-popup","group"),jQuery("#TB_window").css("height",235),jQuery("#TB_window").css("width",680)},qtip:function(){r(".yoast_help").qtip({content:{attr:"alt"},position:{my:"bottom left",at:"top center"},style:{tip:{corner:!0},classes:"yoast-qtip qtip-rounded qtip-blue"},show:"click",hide:{fixed:!0,delay:500}})},start:function(){r(n.wpseoTabSelector).tabs(),n.ids=n.attrs.data("ids"),n.names=n.attrs.data("names"),n.ids=n.ids+","+n.attrs.data("qtip"),n.ids=n.ids.split(","),n.names=n.names.split(","),r("#wpglobus-wpseo-tabs").insertBefore(n.iB),r(".wpseo-metabox-tabs").css({height:"26px"}),r(".wpglobus-wpseo-general").each(function(e,t){var a=r(t),o=a.data("language"),s="wpseo-meta-section-content_"+o;a.html('<div id="'+s+'" class="wpseo-meta-section wpglobus-wpseo-meta-section" style="width:100%" data-language="'+o+'">'+n.t.html()+"</div>"),r("#"+s+" .wpseo-metabox-tabs").attr("id","wpseo-metabox-tabs_"+o),r("#"+s+" .wpseotab").attr("id","wpseo_content_"+o),r("#"+s).css({display:"block"}),r("#wpseo_meta").css({overflow:"hidden"}),r("#"+s+" .snippet_container").addClass("wpglobus-snippet_container"),o!==WPGlobusCoreData.default_language&&r("#"+s+" .wpseo-add-keyword").addClass("hidden"),r.each(n.names,function(e,t){r("#"+t).attr("name",t+"_"+o)}),r.each(n.ids,function(e,t){var a=r("#"+t);"wpseosnippet"==t&&a.addClass("wpglobus-wpseosnippet"),"snippet_title"==t&&a.addClass("wpglobus-snippet_title"),"snippet_meta"==t&&a.addClass("wpglobus-snippet_meta"),"snippet_cite"==t&&a.addClass("wpglobus-snippet_cite"),"snippet_citeBase"==t&&a.addClass("wpglobus-snippet_citeBase"),"yoast_wpseo_focuskw_text_input"==t&&a.addClass("wpglobus-yoast_wpseo_focuskw_text_input"),"wpseo-pageanalysis"==t&&a.addClass("wpglobus-wpseo-pageanalysis"),"snippet_preview"==t&&a.addClass("wpglobus-snippet_preview"),a.attr("id",t+"_"+o),r("#"+t+"_"+o).attr("data-language",o)});var i=WPGlobusCore.TextFilter(r("#yoast_wpseo_focuskw_text_input").val(),o,"RETURN_EMPTY");r("#yoast_wpseo_focuskw_text_input_"+o).val(i),r("#yoast_wpseo_focuskw_"+o).val(i),o!==WPGlobusCoreData.default_language&&(r("#"+s+" #yoast_wpseo_focuskw_text_input_"+o).addClass("hidden").after('<div class="wpglobus-suggest" style="font-weight:bold;">'+WPGlobusVendor.i18n.yoastseo_plus_access+"</div>"),r("#"+s+" #wpseo-pageanalysis_"+o).addClass("hidden"))}),n.iB.addClass("hidden"),n.iB.css({height:0,overflow:"hidden"});var e=WPGlobusCore.TextFilter(r("#yoast_wpseo_focuskw_text_input").val(),WPGlobusCoreData.default_language,"RETURN_EMPTY");r("#yoast_wpseo_focuskw_text_input").val(e),r("#yoast_wpseo_focuskw").val(e),r(".wpseo-metabox-sidebar .wpseo-meta-section-link").on("click",function(e){"#wpseo-meta-section-content"==r(this).attr("href")?r("#wpglobus-wpseo-tabs").css({display:"block"}):r("#wpglobus-wpseo-tabs").css({display:"none"})}),r("body").on("click",".wpglobus-post-body-tabs-list li",function(e){var t=r(this);if(t.hasClass("wpglobus-post-tab")){r("#wpglobus-wpseo-tabs").tabs("option","active",t.data("order"));var a=r("#yoast_wpseo_focuskw_text_input_"+r(this).data("language")).val();YoastSEO.app.rawData.keyword=a,r("#yoast_wpseo_focuskw_text_input").val(a),r('input[name="yoast_wpseo_focuskw"]').val(a),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),n.qtip(),n.initAddKeywordPopup()}},(e=function(){this.replaceVars=wpseoReplaceVarsL10n.replace_vars,this.language=WPGlobusCoreData.default_language,this.tab=WPGlobusCoreData.default_language,this.wpseoTab=WPGlobusCoreData.default_language,this.title_template=wpseoPostScraperL10n.title_template,this.focuskw=r("#yoast_wpseo_focuskw_text_input"),this.focuskw_hidden=r('input[name="yoast_wpseo_focuskw"]'),this.focuskwKeep=!1,this.post_slug="#editable-post-name-full",YoastSEO.app.registerPlugin("wpglobusYoastSeoPlugin",{status:"ready"}),YoastSEO.app.registerModification("content",this.contentModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("title",this.titleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_title",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_meta",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_page_title",this.pageTitleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_meta_desc",this.metaDescModification,"wpglobusYoastSeoPlugin",0),r(document).on("blur",".wpglobus-snippet_title",function(e){var t=r(this),a=WPGlobusCore.getString(r("#yoast_wpseo_title").val(),t.text(),t.data("language"));YoastSEO.app.rawData.pageTitle=a,r('input[name="yoast_wpseo_title"]').val(a),r("#snippet_title").text(a)}),r(document).on("blur",".wpglobus-snippet_meta",function(e){var t=r(this),a=WPGlobusCore.getString(r("#yoast_wpseo_metadesc").val(),t.text(),t.data("language"));r("#yoast_wpseo_metadesc").val(a),r("#snippet_meta").text(a)}),r(document).on("keyup",".wpglobus-yoast_wpseo_focuskw_text_input",function(e){var t=r(this),a=t.val();p.focuskw.val(a),p.focuskw_hidden.val(a),p.updateWpseoKeyword(a,t.data("language")),YoastSEO.app.analyzeTimer(YoastSEO.app)}),r("#publish,#save-post").on("mouseenter",function(e){var a,o="";r(".wpglobus-yoast_wpseo_focuskw_text_input").each(function(e,t){a=r(this),o=WPGlobusCore.getString(o,a.val(),a.data("language"))}),p.focuskw.val(o),p.focuskw_hidden.val(o)}).on("mouseleave",function(e){if(!p.focuskwKeep){p.wpseoTab=r(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language");r(this);p.focuskw.val(r("#yoast_wpseo_focuskw_text_input_"+p.wpseoTab).val()),p.focuskw_hidden.val(r("#yoast_wpseo_focuskw_text_input_"+p.wpseoTab).val())}}).on("click",function(e){p.focuskwKeep=!0}),r(WPGlobusYoastSeo.wpseoTabSelector).on("tabsactivate",function(e,t){if(t.newPanel.attr("data-language")===WPGlobusCoreData.default_language){WPGlobusYoastSeo.url=r(p.post_slug).text();var a=r("#yoast_wpseo_focuskw_text_input_"+WPGlobusCoreData.default_language).val();YoastSEO.app.rawData.keyword=a,p.focuskw.val(a),p.focuskw_hidden.val(a),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),p=this}).prototype.getWPseoTab=function(){return r(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language")},e.prototype.citeModification=function(e){var t="#snippet_citeBase_"+e,a="#snippet_cite_"+e,o=r("#wpseo-tab-"+e).data("yoast-cite-base");!1===r("#wpseo-tab-"+e).data("cite-contenteditable")&&r(a).attr("contenteditable","false"),r(t).text(o)},e.prototype.pageTitleModification=function(a){var o,s="#snippet_title_",i="",n="";return p.title_template==a?r.each(WPGlobusCoreData.enabled_languages,function(e,t){p.language=t,i=p.replaceVariablesPlugin(a),r(s+t).text(i),t==p.getWPseoTab()&&(n=i)}):(o=WPGlobusCore.getTranslations(a),r.each(WPGlobusCoreData.enabled_languages,function(e,t){p.language=t,i=""===o[t]?p.replaceVariablesPlugin(p.title_template):o[t],r(s+t).text(i),t==p.getWPseoTab()&&(n=i)})),n},e.prototype.metaDescModification=function(a){return r.each(WPGlobusCoreData.enabled_languages,function(e,t){r("#snippet_meta_"+t).text(WPGlobusCore.TextFilter(a,t,"RETURN_EMPTY")),p.citeModification(t)}),WPGlobusCore.TextFilter(a,p.getWPseoTab(),"RETURN_EMPTY")},e.prototype.snippetModification=function(e){return WPGlobusCore.TextFilter(e,p.getWPseoTab(),"RETURN_EMPTY")},e.prototype.contentModification=function(e){return p.getWPseoTab()==WPGlobusCoreData.default_language?e:r("#content_"+p.getWPseoTab()).val()},e.prototype.titleModification=function(e){return setTimeout(p.updatePageAnalysis,1e3),p.getWPseoTab()==WPGlobusCoreData.default_language?e:r("#title_"+p.getWPseoTab()).val()},e.prototype.defaultReplace=function(e){return e.replace(/%%sitedesc%%/g,this.replaceVars.sitedesc).replace(/%%sitename%%/g,WPGlobusCore.TextFilter(this.replaceVars.sitename,this.language)).replace(/%%term_title%%/g,this.replaceVars.term_title).replace(/%%term_description%%/g,this.replaceVars.term_description).replace(/%%category_description%%/g,this.replaceVars.category_description).replace(/%%tag_description%%/g,this.replaceVars.tag_description).replace(/%%searchphrase%%/g,this.replaceVars.searchphrase).replace(/%%sep%%/g,this.replaceVars.sep).replace(/%%date%%/g,this.replaceVars.date).replace(/%%id%%/g,this.replaceVars.id).replace(/%%page%%/g,this.replaceVars.page).replace(/%%currenttime%%/g,this.replaceVars.currenttime).replace(/%%currentdate%%/g,this.replaceVars.currentdate).replace(/%%currentday%%/g,this.replaceVars.currentday).replace(/%%currentmonth%%/g,this.replaceVars.currentmonth).replace(/%%currentyear%%/g,this.replaceVars.currentyear).replace(/%%focuskw%%/g,YoastSEO.app.stringHelper.stripAllTags(YoastSEO.app.rawData.keyword))},e.prototype.replaceVariablesPlugin=function(e){return void 0!==e&&(e=this.titleReplace(e),e=this.defaultReplace(e),e=this.doubleSepReplace(e)),e},e.prototype.titleReplace=function(e){var t="";return void 0===(t=this.language==WPGlobusCoreData.default_language?r("#title").val():r("#title_"+this.language).val())&&(t=YoastSEO.app.rawData.pageTitle),e=e.replace(/%%title%%/g,t)},e.prototype.doubleSepReplace=function(e){var t=YoastSEO.app.stringHelper.addEscapeChars(this.replaceVars.sep),a=new RegExp(t+" "+t,"g");return e=e.replace(a,this.replaceVars.sep)},e.prototype.updateWpseoKeyword=function(e,t){t!=WPGlobusCoreData.default_language&&(1==r("#wpseo-meta-section-content_"+t+" .wpseo_keyword").length&&r("#wpseo-meta-section-content_"+t+" .wpseo_keyword").removeClass("wpseo_keyword").addClass("wpglobus-wpseo_keyword_"+t),r(".wpglobus-wpseo_keyword_"+t).text(e))},e.prototype.updatePageAnalysis=function(){r("#wpseo-pageanalysis_"+p.getWPseoTab()).html(r("#wpseo-pageanalysis").html())},window.WPGlobusYoastSeoPlugin=new e,YoastSEO.Analyzer.prototype.urlKeyword=function(){var e=[{test:"urlKeyword",result:0}];return void 0!==WPGlobusYoastSeo&&""!==WPGlobusYoastSeo.url&&(this.config.url=WPGlobusYoastSeo.url),void 0!==this.config.url&&(e[0].result=this.stringHelper.countMatches(this.config.url,this.keywordRegexInverse)),e}}});