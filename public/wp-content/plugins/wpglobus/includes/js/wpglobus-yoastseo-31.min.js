var WPGlobusYoastSeo;jQuery(document).ready(function(r){"use strict";var l;if("undefined"!=typeof wpseoReplaceVarsL10n&&("undefined"!=typeof WPGlobusCoreData&&"undefined"!=typeof WPGlobusVendor))if("edit-tags.php"==WPGlobusVendor.pagenow||"term.php"==WPGlobusVendor.pagenow){l=WPGlobusYoastSeo={editorIDs:["description"],editor:{},submitId:"#submit",preventChangeEditor:!1,observer:null,init:function(){l.attachListeners(),_.delay(l.start,1500)},submit:function(e){"mouseenter"===e.type?r.each(l.editor,function(e,t){!l.editor[e].contentEditor||l.editor[e].contentEditor.isHidden()?r("#"+e).val(l.editor[e].content):tinymce.get(e).setContent(l.editor[e].content)}):"mouseleave"===e.type?l.preventChangeEditor||(r.each(l.editor,function(e,t){!l.editor[e].contentEditor||l.editor[e].contentEditor.isHidden()?r("#"+e).val(WPGlobusCore.TextFilter(t.content,l.getCurrentTab(),"RETURN_EMPTY")):tinymce.get(e).setContent(WPGlobusCore.TextFilter(t.content,l.getCurrentTab(),"RETURN_EMPTY"))}),l.preventChangeEditor=!1):"click"===e.type&&(l.preventChangeEditor=!0,"tinymce"!=getUserSetting("editor")&&setUserSetting("editor","tinymce"))},attachListeners:function(){r(".wrap").on("tabsactivate",function(e,a){r.each(l.editor,function(e,t){!l.editor[e].contentEditor||l.editor[e].contentEditor.isHidden()?r("#"+e).val(WPGlobusCore.TextFilter(t.content,a.newTab[0].dataset.language,"RETURN_EMPTY")):tinymce.get(e).setContent(WPGlobusCore.TextFilter(t.content,a.newTab[0].dataset.language,"RETURN_EMPTY"))})}),r(document).on("mouseenter",l.submitId,l.submit).on("mouseleave",l.submitId,l.submit).on("click",l.submitId,l.submit),r(document).on("tinymce-editor-init",function(e,t){if(-1!=_.indexOf(l.editorIDs,t.id)){var a=r("#"+t.id);l.editor[t.id]={},l.editor[t.id].contentEditor=t,l.editor[t.id].content=a.val(),t.setContent(WPGlobusCore.TextFilter(l.editor[t.id].content,WPGlobusCoreData.default_language,"RETURN_EMPTY")),r("#"+t.getContainer().id).find("iframe").addClass("wpglobus-translatable"),a.removeClass("hidden"),t.on("nodechange keyup",_.debounce(l.update,500)),a.on("input keyup",_.debounce(l.update,500))}})},update:function(e){var t,a;void 0!==e.target&&("tinymce"==(t=e.target.id)&&(t=e.target.dataset.id),void 0!==l.editor[t].contentEditor&&(a=!l.editor[t].contentEditor||l.editor[t].contentEditor.isHidden()?r("#"+t).val():l.editor[t].contentEditor.getContent({format:"raw"}),l.editor[t].content=WPGlobusCore.getString(l.editor[t].content,a,l.getCurrentTab())))},getCurrentTab:function(){return r(".wpglobus-taxonomy-tabs-list .ui-tabs-active").data("language")},start:function(){r(".wpglobus-element_description").css({display:"none"})}},WPGlobusYoastSeo.init();var t=function(){r(".wrap").on("tabsactivate",function(e,t){t.newTab[0].dataset.language==WPGlobusCoreData.default_language?r("#poststuff .inside").css({display:"block"}):r("#poststuff .inside").css({display:"none"})}),r.each(["category_description","sitedesc","sitename","tag_description","term_description","term_title"],function(e,t){wpseoReplaceVarsL10n.replace_vars[t]=WPGlobusCore.TextFilter(wpseoReplaceVarsL10n.replace_vars[t],WPGlobusCoreData.default_language)}),WPGlobusYoastSeo.observer=new MutationObserver(function(e){e.forEach(function(e){if("placeholder"==e.attributeName){WPGlobusYoastSeo.observer.disconnect();var t=r("#wpseo_focuskw");""==t.val()&&t.attr("placeholder",WPGlobusCore.TextFilter(t.attr("placeholder"),WPGlobusCoreData.default_language)),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})}})}),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})};window.WPGlobusYoastSeoPlugin=new t}else{var p;l=WPGlobusYoastSeo={wpseoTabSelector:"#wpglobus-wpseo-tabs",url:"",attrs:r("#wpglobus-wpseo-attr"),iB:r("#wpseo-meta-section-content"),t:r("#wpseo-meta-section-content"),ids:"",names:"",editSnippetButtonClass:"wpglobus-snippet-editor__edit-button",editSnippetFormClass:"wpglobus-snippet-editor__form",editSnippetSubmitClass:"wpglobus-snippet-editor__submit",editSnippetHeadingClass:"wpglobus-snippet-editor__heading-editor",yoastTitleProgress:"wpglobus-yoast-title-progress",yoastMetadescProgress:"wpglobus-yoast-metadesc-progress",init:function(){l.start()},initAddKeywordPopup:function(){1===r("#wpseo-add-keyword-popup").length&&r(".wpseo-add-keyword").on("click",l.addKeywordPopup)},addKeywordPopup:function(){var e=r("#wpseo-add-keyword-popup").find("h3").html();tb_show(e,"#TB_inline?width=650&height=350&inlineId=wpseo-add-keyword-popup","group"),jQuery("#TB_window").css("height",235),jQuery("#TB_window").css("width",680)},qtip:function(){r(".yoast_help").qtip({content:{attr:"alt"},position:{my:"bottom left",at:"top center"},style:{tip:{corner:!0},classes:"yoast-qtip qtip-rounded qtip-blue"},show:"click",hide:{fixed:!0,delay:500}})},removeClasses:function(t,e){_.each(e,function(e){t.removeClass(e)})},updateProgressBar:function(e,t){if(void 0!==e&&(void 0!==t||("undefined"!==e.data("language")&&(t=e.data("language")),void 0!==t))){var a,s,o=["snippet-editor__progress--bad","snippet-editor__progress--ok","snippet-editor__progress--good"],i="",n=0,p=!1;s=e.val().length,e.hasClass("wpglobus-snippet-editor-title")?(n=(a=r("progress."+l.yoastTitleProgress+"_"+t)).attr("max"),i=o[2],0==s?i=o[1]:n<s?(i=o[1],p=!0):0<s&&s<35&&(i=o[1])):e.hasClass("wpglobus-snippet-editor-meta-description")&&(n=(a=r("progress."+l.yoastMetadescProgress+"_"+t)).attr("max"),i=o[2],0==s?i=o[1]:n<s?(i=o[1],p=!0):0<s&&s<121&&(i=o[1])),l.removeClasses(a,o),a.attr("value",s).addClass(i),p?e.css("color","#f00"):e.css("color","#000")}},start:function(){r(l.wpseoTabSelector).tabs(),l.ids=l.attrs.data("ids"),l.names=l.attrs.data("names"),l.ids=l.ids+","+l.attrs.data("qtip"),l.ids=l.ids.split(","),l.names=l.names.split(","),r("#wpglobus-wpseo-tabs").insertBefore(l.iB),r(".wpseo-metabox-tabs").css({height:"26px"}),r(".wpglobus-wpseo-general").each(function(e,t){var a=r(t),s=a.data("language"),o="wpseo-meta-section-content_"+s;a.html('<div id="'+o+'" class="wpseo-meta-section wpglobus-wpseo-meta-section" style="width:100%" data-language="'+s+'">'+l.t.html()+"</div>"),r("#"+o+" .wpseo-metabox-tabs").attr("id","wpseo-metabox-tabs_"+s),r("#"+o+" .wpseotab").attr("id","wpseo_content_"+s),r("#"+o).css({display:"block"}),r("#wpseo_meta").css({overflow:"hidden"}),r("#"+o+" .snippet_container").addClass("wpglobus-snippet_container"),s!==WPGlobusCoreData.default_language&&r("#"+o+" .wpseo-add-keyword").addClass("hidden"),r.each(l.names,function(e,t){r("#"+t).attr("name",t+"_"+s)}),r.each(l.ids,function(e,t){var a=r("#"+t);"wpseosnippet"==t&&a.addClass("wpglobus-wpseosnippet"),"snippet_title"==t&&a.addClass("wpglobus-snippet_title"),"snippet_meta"==t&&a.addClass("wpglobus-snippet_meta"),"snippet_cite"==t&&a.addClass("wpglobus-snippet_cite"),"snippet_citeBase"==t&&a.addClass("wpglobus-snippet_citeBase"),"yoast_wpseo_focuskw_text_input"==t&&a.addClass("wpglobus-yoast_wpseo_focuskw_text_input"),"wpseo-pageanalysis"==t&&a.addClass("wpglobus-wpseo-pageanalysis"),"snippet_preview"==t&&a.addClass("wpglobus-snippet_preview"),"snippet-editor-title"==t&&(a.addClass("wpglobus-snippet-editor-title"),a.parent("label").attr("for",a.parent("label").attr("for")+"_"+s),a.val(r("#wpseo-tab-"+s).data("wpseotitle")),a.parent("label").find("progress").addClass(l.yoastTitleProgress).addClass(l.yoastTitleProgress+"_"+s),_.debounce(l.updateProgressBar(a,s),500)),"snippet-editor-slug"==t&&(a.addClass("wpglobus-snippet-editor-slug"),a.parent("label").attr("for",a.parent("label").attr("for")+"_"+s),WPGlobusCoreData.default_language!=s&&a.attr("disabled","disabled")),"snippet-editor-meta-description"==t&&(a.addClass("wpglobus-snippet-editor-meta-description"),a.parent("label").attr("for",a.parent("label").attr("for")+"_"+s),a.val(r("#wpseo-tab-"+s).data("metadesc")),a.parent("label").find("progress").addClass(l.yoastMetadescProgress).addClass(l.yoastMetadescProgress+"_"+s),_.debounce(l.updateProgressBar(a,s),500)),a.attr("id",t+"_"+s),r("#"+t+"_"+s).attr("data-language",s)});var i=WPGlobusCore.TextFilter(r("#yoast_wpseo_focuskw_text_input").val(),s,"RETURN_EMPTY");r("#yoast_wpseo_focuskw_text_input_"+s).val(i),r("#yoast_wpseo_focuskw_"+s).val(i),s!==WPGlobusCoreData.default_language&&(r("#"+o+" #yoast_wpseo_focuskw_text_input_"+s).addClass("hidden").after('<div class="wpglobus-suggest" style="font-weight:bold;">'+WPGlobusVendor.i18n.yoastseo_plus_access+"</div>"),r("#"+o+" #wpseo-pageanalysis_"+s).addClass("hidden"))}),r(".wpglobus-wpseosnippet").each(function(e,t){var a=r(t),s=a.data("language");a.find("button.snippet-editor__button.snippet-editor__edit-button").addClass(l.editSnippetButtonClass).addClass(l.editSnippetButtonClass+"_"+s).attr("data-language",s),a.find(".snippet-editor__form").addClass(l.editSnippetFormClass).addClass(l.editSnippetFormClass+"_"+s),a.find(".snippet-editor__heading-editor").addClass(l.editSnippetHeadingClass).addClass(l.editSnippetHeadingClass+"_"+s),a.find(".snippet-editor__submit").addClass(l.editSnippetSubmitClass).addClass(l.editSnippetSubmitClass+"_"+s).attr("data-language",s)}),l.iB.addClass("hidden"),l.iB.css({height:0,overflow:"hidden"});var e=WPGlobusCore.TextFilter(r("#yoast_wpseo_focuskw_text_input").val(),WPGlobusCoreData.default_language,"RETURN_EMPTY");r("#yoast_wpseo_focuskw_text_input").val(e),r("#yoast_wpseo_focuskw").val(e),r(".wpseo-metabox-sidebar .wpseo-meta-section-link").on("click",function(e){"#wpseo-meta-section-content"==r(this).attr("href")?r("#wpglobus-wpseo-tabs").css({display:"block"}):r("#wpglobus-wpseo-tabs").css({display:"none"})}),r("body").on("click","."+l.editSnippetButtonClass,function(e){var t=r(this),a=t.data("language"),s=r("."+l.editSnippetFormClass+"_"+a),o=r("."+l.editSnippetSubmitClass+"_"+a),i=r("."+l.editSnippetHeadingClass+"_"+a);s.hasClass("snippet-editor--hidden")?(s.removeClass("snippet-editor--hidden"),i.removeClass("snippet-editor--hidden"),o.removeClass("snippet-editor--hidden")):(s.addClass("snippet-editor--hidden"),i.addClass("snippet-editor--hidden")),t.addClass("snippet-editor--hidden")}),r("body").on("click","."+l.editSnippetSubmitClass,function(e){var t=r(this).data("language"),a=r("."+l.editSnippetButtonClass+"_"+t),s=r("."+l.editSnippetFormClass+"_"+t),o=r("."+l.editSnippetSubmitClass+"_"+t),i=r("."+l.editSnippetHeadingClass+"_"+t);a.removeClass("snippet-editor--hidden"),s.addClass("snippet-editor--hidden"),o.addClass("snippet-editor--hidden"),i.addClass("snippet-editor--hidden")}),r(document).on("keyup","input.wpglobus-snippet-editor-title",function(e){var t=r(this),a=t.data("language"),s=WPGlobusCore.getString(r('input[name="yoast_wpseo_title"]').val(),t.val(),a);r("#snippet_title_"+a).text(t.val()),YoastSEO.app.rawData.pageTitle=s,r('input[name="yoast_wpseo_title"]').val(s),r("#snippet_title").text(s),_.debounce(l.updateProgressBar(t,a),500)}),r(document).on("keyup","input.wpglobus-snippet-editor-slug",function(e){var t=r(this),a=t.data("language");r("#snippet_cite_"+a).text(t.val()+"/"),r("#editable-post-name").text(t.val()),r("#editable-post-name-full").text(t.val())}),r(document).on("change","input.wpglobus-snippet-editor-slug",function(e){var t=r(this);r.post(ajaxurl,{action:"sample-permalink",post_id:r("#post_ID").val()||0,new_slug:t.val(),new_title:r("#title").val(),samplepermalinknonce:r("#samplepermalinknonce").val()})}),r(document).on("keyup","textarea.wpglobus-snippet-editor-meta-description",function(e){var t=r(this),a=t.data("language");r("#snippet_meta_"+a).text(t.val());var s=WPGlobusCore.getString(r("#yoast_wpseo_metadesc").val(),t.val(),t.data("language"));r("#yoast_wpseo_metadesc").val(s),r("#snippet_meta").text(s),_.debounce(l.updateProgressBar(t,a),500)}),r("body").on("click",".wpglobus-post-body-tabs-list li",function(e){var t=r(this);if(t.hasClass("wpglobus-post-tab")){r("#wpglobus-wpseo-tabs").tabs("option","active",t.data("order"));var a=r("#yoast_wpseo_focuskw_text_input_"+r(this).data("language")).val();YoastSEO.app.rawData.keyword=a,r("#yoast_wpseo_focuskw_text_input").val(a),r('input[name="yoast_wpseo_focuskw"]').val(a),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),l.qtip(),l.initAddKeywordPopup()}},(t=function(){this.replaceVars=wpseoReplaceVarsL10n.replace_vars,this.language=WPGlobusCoreData.default_language,this.tab=WPGlobusCoreData.default_language,this.wpseoTab=WPGlobusCoreData.default_language,this.title_template=wpseoPostScraperL10n.title_template,this.focuskw=r("#yoast_wpseo_focuskw_text_input"),this.focuskw_hidden=r('input[name="yoast_wpseo_focuskw"]'),this.focuskwKeep=!1,this.post_slug="#editable-post-name-full",YoastSEO.app.registerPlugin("wpglobusYoastSeoPlugin",{status:"ready"}),YoastSEO.app.registerModification("content",this.contentModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("title",this.titleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_title",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_meta",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_page_title",this.pageTitleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_meta_desc",this.metaDescModification,"wpglobusYoastSeoPlugin",0),r(document).on("blur",".wpglobus-snippet_title",function(e){var t=r(this),a=WPGlobusCore.getString(r("#yoast_wpseo_title").val(),t.text(),t.data("language"));YoastSEO.app.rawData.pageTitle=a,r('input[name="yoast_wpseo_title"]').val(a),r("#snippet_title").text(a)}),r(document).on("blur",".wpglobus-snippet_meta",function(e){var t=r(this),a=WPGlobusCore.getString(r("#yoast_wpseo_metadesc").val(),t.text(),t.data("language"));r("#yoast_wpseo_metadesc").val(a),r("#snippet_meta").text(a)}),r(document).on("keyup",".wpglobus-yoast_wpseo_focuskw_text_input",function(e){var t=r(this),a=t.val();p.focuskw.val(a),p.focuskw_hidden.val(a),p.updateWpseoKeyword(a,t.data("language")),YoastSEO.app.analyzeTimer(YoastSEO.app)}),r("#publish,#save-post").on("mouseenter",function(e){var a,s="";r(".wpglobus-yoast_wpseo_focuskw_text_input").each(function(e,t){a=r(this),s=WPGlobusCore.getString(s,a.val(),a.data("language"))}),p.focuskw.val(s),p.focuskw_hidden.val(s)}).on("mouseleave",function(e){if(!p.focuskwKeep){p.wpseoTab=r(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language");r(this);p.focuskw.val(r("#yoast_wpseo_focuskw_text_input_"+p.wpseoTab).val()),p.focuskw_hidden.val(r("#yoast_wpseo_focuskw_text_input_"+p.wpseoTab).val())}}).on("click",function(e){p.focuskwKeep=!0}),r(WPGlobusYoastSeo.wpseoTabSelector).on("tabsactivate",function(e,t){if(t.newPanel.attr("data-language")===WPGlobusCoreData.default_language){WPGlobusYoastSeo.url=r(p.post_slug).text();var a=r("#yoast_wpseo_focuskw_text_input_"+WPGlobusCoreData.default_language).val();YoastSEO.app.rawData.keyword=a,p.focuskw.val(a),p.focuskw_hidden.val(a),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),p=this}).prototype.getWPseoTab=function(){return r(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language")},t.prototype.citeModification=function(e){var t="#snippet_citeBase_"+e,a="#snippet_cite_"+e,s=r("#wpseo-tab-"+e).data("yoast-cite-base");!1===r("#wpseo-tab-"+e).data("cite-contenteditable")&&r(a).attr("contenteditable","false"),r(t).text(s)},t.prototype.pageTitleModification=function(a){var s,o="#snippet_title_",i="",n="";if(p.title_template==a)r.each(WPGlobusCoreData.enabled_languages,function(e,t){p.language=t,i=p.replaceVariablesPlugin(a),r(o+t).text(i),t==p.getWPseoTab()&&(n=i)});else{if(s=WPGlobusCore.getTranslations(a),p.getWPseoTab()!==WPGlobusCoreData.default_language&&s[WPGlobusCoreData.default_language]==a){var e=p.getWPseoTab();return r(o+e).text(a),a}r.each(WPGlobusCoreData.enabled_languages,function(e,t){p.language=t,i=""===s[t]?p.replaceVariablesPlugin(p.title_template):s[t],r(o+t).text(i),t==p.getWPseoTab()&&(n=i)})}return n},t.prototype.metaDescModification=function(a){var s="#snippet_meta_";if(p.getWPseoTab()!==WPGlobusCoreData.default_language&&WPGlobusCore.getTranslations(a)[WPGlobusCoreData.default_language]==a){var e=p.getWPseoTab();return r(s+e).text(a),p.citeModification(e),a}return r.each(WPGlobusCoreData.enabled_languages,function(e,t){r(s+t).text(WPGlobusCore.TextFilter(a,t,"RETURN_EMPTY")),p.citeModification(t)}),WPGlobusCore.TextFilter(a,p.getWPseoTab(),"RETURN_EMPTY")},t.prototype.snippetModification=function(e){return WPGlobusCore.TextFilter(e,p.getWPseoTab(),"RETURN_EMPTY")},t.prototype.contentModification=function(e){return p.getWPseoTab()==WPGlobusCoreData.default_language?e:r("#content_"+p.getWPseoTab()).val()},t.prototype.titleModification=function(e){return setTimeout(p.updatePageAnalysis,1e3),p.getWPseoTab()==WPGlobusCoreData.default_language?e:r("#title_"+p.getWPseoTab()).val()},t.prototype.defaultReplace=function(e){var t=YoastSEO.app.rawData.keyword;return e.replace(/%%sitedesc%%/g,this.replaceVars.sitedesc).replace(/%%sitename%%/g,this.replaceVars.sitename).replace(/%%term_title%%/g,this.replaceVars.term_title).replace(/%%term_description%%/g,this.replaceVars.term_description).replace(/%%category_description%%/g,this.replaceVars.category_description).replace(/%%tag_description%%/g,this.replaceVars.tag_description).replace(/%%searchphrase%%/g,this.replaceVars.searchphrase).replace(/%%date%%/g,this.replaceVars.date).replace(/%%id%%/g,this.replaceVars.id).replace(/%%page%%/g,this.replaceVars.page).replace(/%%currenttime%%/g,this.replaceVars.currenttime).replace(/%%currentdate%%/g,this.replaceVars.currentdate).replace(/%%currentday%%/g,this.replaceVars.currentday).replace(/%%currentmonth%%/g,this.replaceVars.currentmonth).replace(/%%currentyear%%/g,this.replaceVars.currentyear).replace(/%%focuskw%%/g,t)},t.prototype.replaceVariablesPlugin=function(e){return void 0!==e&&(e=this.titleReplace(e),e=this.defaultReplace(e),e=this.replaceSeparators(e)),e},t.prototype.replaceSeparators=function(e){return e.replace(/%%sep%%(\s+%%sep%%)*/g,this.replaceVars.sep)},t.prototype.titleReplace=function(e){var t="";return void 0===(t=this.language==WPGlobusCoreData.default_language?r("#title").val():r("#title_"+this.language).val())&&(t=YoastSEO.app.rawData.pageTitle),e=e.replace(/%%title%%/g,t)},t.prototype.doubleSepReplace=function(e){var t=YoastSEO.app.stringHelper.addEscapeChars(this.replaceVars.sep),a=new RegExp(t+" "+t,"g");return e=e.replace(a,this.replaceVars.sep)},t.prototype.updateWpseoKeyword=function(e,t){t!=WPGlobusCoreData.default_language&&(1==r("#wpseo-meta-section-content_"+t+" .wpseo_keyword").length&&r("#wpseo-meta-section-content_"+t+" .wpseo_keyword").removeClass("wpseo_keyword").addClass("wpglobus-wpseo_keyword_"+t),r(".wpglobus-wpseo_keyword_"+t).text(e))},t.prototype.updatePageAnalysis=function(){r("#wpseo-pageanalysis_"+p.getWPseoTab()).html(r("#wpseo-pageanalysis").html())},t.prototype.countMatches=function(e,t){return null!==e.match(t)?e.match.length:0},window.WPGlobusYoastSeoPlugin=new t,YoastSEO.Analyzer.prototype.urlKeyword=function(){var e=[{test:"urlKeyword",result:0}];return void 0!==WPGlobusYoastSeo&&""!==WPGlobusYoastSeo.url&&(this.config.url=WPGlobusYoastSeo.url),void 0!==this.config.url&&(e[0].result=t.prototype.countMatches(this.config.url,this.keywordRegexInverse)),e}}});